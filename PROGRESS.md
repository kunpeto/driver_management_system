# 開發進度追蹤

**最後更新**: 2026-01-31

---

## 整體進度

| Phase | 名稱 | 任務數 | 完成數 | 進度 | 狀態 |
|-------|------|--------|--------|------|------|
| 0 | Setup | 11 | 11 | 100% | ✅ 完成 |
| 2 | Foundational | 24 | 24 | 100% | ✅ 完成 |
| 3 | US1 - 系統設定 | 10 | 10 | 100% | ✅ 完成 |
| 4 | US2 - 員工管理 | 16 | 16 | 100% | ✅ 完成 |
| 5 | US3 - 權限控制 | 8 | 8 | 100% | ✅ 完成 |
| 6 | US4 - 班表同步 | 12 | 12 | 100% | ✅ 完成 |
| 7 | US6 - 連線監控 | 8 | 8 | 100% | ✅ 完成 |
| 8 | US7 - Google OAuth | 8 | 8 | 100% | ✅ 完成 |
| 9 | US5 - 駕駛競賽 | 16 | 16 | 100% | ✅ 完成 |
| 10 | Polish | 12 | 12 | 100% | ✅ 完成 |
| 11 | US8 - 事件履歷 | 14 | 14 | 100% | ✅ 完成 |
| 12 | US9 - 考核系統 | 34 | 34 | 100% | ✅ 完成 |
| 13 | US10 - 差勤加分 | 6 | 6 | 100% | ✅ 完成 |
| 14 | US11 - 未結案管理 | 8 | 8 | 100% | ✅ 完成 |

**總計**: 所有規劃任務皆已完成。

---

## 詳細完成紀錄

### Phase 0-2: 基礎架構 ✅
- 專案結構、Git、環境變數
- FastAPI 後端、Vue3 前端、TiDB 資料庫連線
- JWT 認證、RBAC 權限控制、安全性加密

### Phase 3-5: 核心管理功能 ✅
- 系統設定 (SystemSettings) 與部門參數配置
- 員工管理 (CRUD, 批次匯入/匯出, 調動記錄)
- 使用者帳號與權限管理

### Phase 6-8: 外部整合與監控 ✅
- Google Sheets 班表同步 (ScheduleSync)
- Google OAuth 2.0 授權整合
- 系統連線狀態監控與健康檢查

### Phase 9: 駕駛時數與競賽 ✅
- 每日勤務時數統計
- 駕駛競賽積分計算 (含 R 班係數、責任懲罰係數)
- 競賽排名儀表板

### Phase 11: 事件履歷管理 ✅
- 履歷主檔 (Profile) 與四種子表 (調查、訪談、矯正、考核)
- 履歷狀態流轉與 PDF 整合

### Phase 12: 2026 新制考核系統 ✅
- **核心架構**: 考核標準管理、考核記錄 (AssessmentRecord)
- **R02-R05 雙因子判定**: 整合 9 項疏失查核表與責任係數 (1.0/0.7/0.3)
- **累計加重機制**: 依類別 (D/W/O/S/R) 年度累計，R02-R05 合併計算 (P1 修正)
- **連動重算**: 支援履歷日期變更、刪除/還原時自動重算累計倍率與員工總分
- **年度重置**: 每年 1/1 自動重算與歸零機制

### Phase 13: 差勤加分自動處理 ✅
- 自動分析 Google Sheets 班表
- 判定 +M01 (全勤), +A01 (R班), +A03~06 (加班)
- 自動建立加分記錄並計算 +M02/+M03 (零違規獎勵)

### Phase 14: 未結案管理 ✅
- 未結案履歷列表與狀態追蹤
- 整合 Local API 進行 PDF 上傳至 Google Drive
- 視覺化統計儀表板

---

## 里程碑

| 里程碑 | 預計日期 | 狀態 | 說明 |
|--------|---------|------|------|
| M1: 基礎架構完成 | 2026-01-28 | ✅ | Phase 0-2 完成 |
| M2: 核心功能可用 | 2026-01-29 | ✅ | Phase 3-5 完成 (MVP) |
| M3: 考核與競賽系統 | 2026-01-30 | ✅ | Phase 9, 11, 12 完成 |
| M4: 自動化與整合 | 2026-01-31 | ✅ | Phase 6, 13, 14 完成 |
| M5: 系統上線準備 | 2026-01-31 | ✅ | 全功能開發完成 |

---

## 後續維護重點 (Post-Launch)

雖然功能已全數實作，但以下項目需持續關注：

1.  **Google Token 維護**: 需定期確認 Refresh Token 有效性。
2.  **備份策略**: TiDB Cloud 免費版需手動定期匯出資料備份。
3.  **效能監控**: 隨著履歷與考核記錄增加，需觀察 `recalculate_cumulative_counts` 的執行效能。